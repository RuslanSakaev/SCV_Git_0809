![Logo](Git-Logo-1788C.png)

# Работа с Git

## 1. Проверяем наличие установленного Git
Заходим в **_VS Code_**. 

В терминалe выполнить команду `git version`. 
Если Git установлен, появиться сообщение с информацией о версии программы. Иначе будет сообщение об ошибке.

## 2. Установка Git
* Загрушаем последнюю версию с сайта https://git-scm.com/downloads.
* Устанавливаем с настройками по умолчанию.

## 3. Настройка Git
* При первом использовании Git нам необходимо представиться. Для этого нужно ввести в терминале две команды:
```
git config --global user.name "Ваше имя английскими буквами"
git config --global user.email ваша "почта@example.com"
```
* Что бы открыть терминал необходимо сделать следующее:

1. Открываем терминал через раздел в меню "Терминал" - создать терминал, либо через раздел меню "Вид" - Терминал.
Так же можно использовать горячие клавиши:
~~~
CTRL+SHIFT+`
CTRL+`
~~~
2. В правом углу терминала в меню с помощью иконки "корзина" можно удалить терминал.
3. В правом углу терминала в меню с помощью иконки "+" из разворячивающегося списка можно выбрать тип терминала. По умолчанию используеться "PowerShell", который работает не стабильно, рекомендуеться использовать "Git Bash".
4. Выбираем "Git Bash" по умолчанию.

5. В меню "Фаил"`VSCode` ставим галочку напротив "Автосохранение".

6. Основные команды `Git`:

![Logo](commands_git.png)

## 4. Инициализация репозитория

### Первый вариант:
* Создаём на рабочем компьютере паку, в которой будет размещён репозиторий, задаём ей нужное имя.
* В `VS Code` в главном меню открываем "проводник", либо через меню "файл" выбираем нужную папку. 
* Инициализируем папку репозитория, для этого вводим команду:
```
git init
```
_В исходной папке появиться скрытая папака *.git*_

* Проверяем состояние нашего репозитория, для этого вводим команду:
~~~
git status
~~~
* Git должен выдать сообщение о создании ветки `master` и отсутствии `commits`, а так же подсказки о дальнейших действиях.
* Следуя подсказам, создаём новый фаил, для этого в меню рядом с названием паки в `VSCode` нажимаем на иконку файлика с плюсиком, называем фаил с указанием расширения ".md", что определяет файл для языка програмирования `Markdown`.
* Далее проверяем статус, набираем команду:
```
git status
```
* Git выдаёт сообщение о создании ветки `master`, сообщает, что имеются неотслеживаемые файлы, подсветкой красным шрифтом `name_fail.md`, и даёт подсказку что делать далее.
* Вводим команду для добавления в отслеживание файла (в область индексации), при этом для автоматического заполнения имени файла можно использовать клавишу `Tab`:
```
git add name_file.md
```
Команду `git add` можно гибко настраивать с помощью дополнительных параметров (флагов), которые подробно описаны в официальной документации: https://git-scm.com/docs/git-add. К примеру, команда `git add —force` добавит даже игнорируемые файлы, а `git add —update` позволит обновить отслеживаемые файлы.

* Для фиксации всех изменений можно воспользоваться командой:
```
git .add
```

* Фиксируем внесённые изменения и пишем коментарий к ним. для этого в терминале вводим команду:
```
git commit -m "текст сообщения"
```
* Проверяем статус, вводим команду:
```
git status
```
* Смотрим, какие выполнены изменения и сохранения, вводим команду:
~~~
git log
~~~

* Для просмотра полного списка изменений построчно вводим команду:
```
git log --oneline
```
### Второй вариант:

* Можно клонировать существующий репозиторий Git из любого места. Для этого используем команду:
```
git clone <адрес репозитория>
```

## 5. Запись изменений в репозиторий

* Для записи изменений, которые внесли в отслеживаемый фаил, каждый раз добавляем его к следующему коммиту, для этого вводим команду:
```
git add name_file.md
```
* Затем фиксируем изменения и пишем коментарий об этих изменениях, вводим команду:
```
git commit -m "massage"
```
* Проверяем внесённые изменения, вводим команду:
~~~
git status
~~~
* Можно сразу добавить фаил и сохранить его с коментарием, для этого вводим команду:
```
git commit -a -m "massage"
```
* То же самое можно записать следующим образом:
```
git commit -am "massage"
```
* __Следует помнить, что данная команда добавляет в коммит и сохраняет все изменения, не только в выбранном файле__

* Что бы увидеть разницу между текущим файлом и закоммиченным нужно воспользоваться командой:
```
git diff
```
* Изменить название файла в `Git`, вводим команду:

```
git mv old_name new_name
```

## 6. Просмотр историй коммитов

* Истоию просмотра коммитов просматриваем командой:
```
git log
```
* Данная команда выводит весь список коммитов со всеми изменениями.
* Для просмотра короткого списка нужно воспользоваться командой:
```
git log --oneline
```
* Данная команда позволяет увидеть все изменения в одном списки, удобна для просмотра.

## 7. Перемещение между сохранениями

* Для перемещения между коммитами используется команда:
```
git checkout
```
* Для этого необходимо в списке коммитов выбрать нужный коммит, достаточно знать первые 4 симова нужного коммита, например:
~~~
git checkout 87b7
~~~
* Для возврата к последнему изменению необходимо ввести команду:
```
git checkout master
```
* __Для сохранения актуального состояния рабочего файла не забываем проверять в какой ветки мы работаем__
* В новых версиях `Git` для переключения между коммитами можно использовать команду:
```
git checkout switch
```
## 8. Добавление и удаление файлов

1. Создаём новый фаил с расширением ".txt" через иконку с названием папки.
2. Вводим команду для проверки статуса:
```
git starus
```
3. Данного файла в репозитории нет, `Git` его не отслеживает.
4. Вводим команду для отслеживания нового файла:
```
git add name_file.txt
```
5. Делаем коммит этого файла с коментарием:
```
git commit -m "текст"
```
6. Для ~~удаления~~ ненужного файла наводим на него мышкой, кликаем правой кнопкой и удаляем.
7. Далее выполняем команду:
```
git rm name_file.txt
```
8. Далее выполняем команду:
```
git status
```
9. Git выдаёт сообщение что фаил удалён, подсвечивая его зелёным цветом.
10. Фиксируем внесённые изменения:
```
git commit -m "Текст сообщения"
```
Данную команду по удалению файла целесообразнее и правильнее выполнять сразу через `Git`.

11. Для добавления картинки в тексте набираем:
```
![Logo](веб ссылка, либо относительная ссылка)
```
__Изображения не принято коммитить, поэтому их добавляем в игнорирование__

12. Добавляем картинку и игнорирование, для этого создаём фаил в меню паки и называем его:
```
.gitignore
```
В созданном файле можно указать как сами файлы, так и их расширения через *, например:
```
*.jpg
*.png
и т.д.
```

## 9. Работа с ветками.

1. Ветки позволяют легко управлять черновиками и чистовиками в Git. Для начала работы с новой веткой необходимо выполнить команды `git init`, `git stasus`, `git add`, `git commit`, а затем можно создать новую ветку, для этого воодим команду:
```
git branch <название новой ветки>
```
2. Для вывода на экран имеющихся веток набираем команду:
```
git branch
```
3. Для переключениями между ветками набираем команду:
```
git checkout <имя ветки> 
```
4. Для возвращения к основной ветке набираем команду:
```
git branch master
```
5. Для удаления ненужной ветки пользуемся командой:
```
git branch -d branch name
```
6. Что бы создать новую ветку и сразу перейти в неё используем команду:
```
git checkout -b new-branch или git switch -c new-branch
```
7. Что бы посмотреть перемещение ветки HEAD и найти все потеренные коммиты используем команду:
```
git reflog
```
8. Для слияния веток после проверки и принятии всех изменений и дополнений необходимо воспользоваться командой `git merge`, для этого необходимо перейти в основную ветку, использую команду `git checkout <имя нужной ветки>`, в которую будем добавлять информацию. Например, нам необходимо в ветку `master` внести информацию из ветки `conf`, этого мы сначала проверяем в какой ветки находимся (команда `git branch`), затем, если мы не находимся в ветке `master`, переключаемся на неё (`git checkout mastr`), далее вводим комаду:
~~~
git merge conf
~~~

### Конфликт изменений

__Работая одновременно в разных ветках может возникнуть конфликт при слиянии, если в эти ветки была по разному внесена какая-то информация__

9. При слиянии веток с разной информацией `Git` сообщит о конфликте и предложет выбрать какие изменения необходимо записать. Для этого в ручную в подсвеченых вариантах выбираем, что необходимо оставить, остальное удаляем и принимаем слияние.

Напирмер:

![Logo](conf.png)

10. Так же может возникнуть конфликт при попытки удаления ветки с внесёнными изменениями, но не слитыми с основной веткой. Например, была внесена какая-то информация в ветку `conf` после того, как эта ветка была слита. При попытке её удалить `Git` выдаст сообщение:
![Logo](conf2.png)
Если мы уверены, что внесённая информация для нас не актуальна, то эту ветку можно удалить, используя следующую команду:
~~~
git branch -D conf
~~~

11. Визуализация всех веток. Ключ -graf в связке с командой log позволяет отобразить коммиты в виде дерева:
```
git log --grap
```

# Работа с удалёнными репозиториями

Как правило, есть два варианта начать работу с репозиторием Git:
- Можно выбрать локальный каталог и создать новый репозиторий в нем.
- Можно клонировать существующий репозиторий с локального компьютера или сервера. Первый случай мы рассмотрели ранее, теперь рассмотрим как работать с удалёнными репозиториями.

1. Для работы с удалённым репозиторием будем использовать ресурс https://github.com/. Данный ресурс являеться бесплатным и самым популярным на данный момент. Для этого необходимо зарегистрироваться на сайте.

2. После регистрации на сайте `github.com` находим нужный репозиторий и копируем на локальный компьютер, для этого нажимаем справой стороны нужного репозитория кнопнку `Code` и копируем `HTML`адрес нужного репозитория:
![Logo](rep.png)
В терминале даём новую команду `git`:
```
git clone <скопрированый адрес>
```
`Git` скоприует на локальный компьютер репозиторий с `githab`, создаст новую папку и перенесёт в неё все файлы.

3. С помощью команды `cd` необходимо переместиться в папку с скопированным репозиторийем и потом можно начать в нём работать. При этом команда `cd` набираеться без `git`, так как являеться его встроенной командой.

4. Для перемещения своего репозитория в `githab` создаём новую папку с новым репозиторийем и выполняем все мероприятия по её инициализации, описанные выше.
__Для того, что бы скачать нужный репозиторий с `Githab`, необязательно иметь собственный аккаунт, а для размещения на нём своего репозитория - это сделать необходимо__

5. Далее в своём аккаунте на `Githab` создаём новый репозиторий:
![Logo](rep2.png)
Присваиваем ему нужное имя. Далее следуем советам `Githab`, который предлагает несколко вариантов и подсказки:
![Logo](comand.png)

6. При первом связывании `git` с удалённым репозиторием на `githab` их необходимо связать, пройти авторизацию. 

7. После успешной авторизации следуем инструкциям `Githab`, который нам предлагает три варианта:
* создать новый репозиторий через терминал и начать сним работать
* существующий репозитоий привязать к удалённому репозиторию
* импортировать код другого удалённого репозитория

Мы рассмотрим вариант по привязке существующего репозитория к удалённому.
Для этого поочереди выполним в терминале следующие действия:
```
 git remote add origin https://github.com/RuslanSakaev/Git_1-s-.git
 git branch -M main
 git push -u origin main
 ```
 После ввода последний команды при отсутствии конфликтов `Git` выдаст следующее:
 ```
 Enumerating objects: 188, done.
Counting objects: 100% (188/188), done.
Delta compression using up to 4 threads
Compressing objects: 100% (139/139), done.
Writing objects: 100% (188/188), 26.41 KiB | 450.00 KiB/s, done.
Total 188 (delta 60), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (60/60), done.
To https://github.com/RuslanSakaev/Git_1-s-.git
 * [new branch]      main -> main
branch 'main' set up to track 'origin/main'.
```
Что свидетельствует об успешной передачи репозитория на `Githab`

8. Далее при помощи команды `git push` мы можем отправлять внесённые изменения в локальный репозиторий на удалённый, а командой `git clone` можем скоприровать удалённый репозиторий (для этого необходимо знать ссылку репозитрория на `Githab`). Редактировать фаил можно как на локальном компьютере, так и на `Githab`, при этом на `Githab` будут отражаться все коммиты, включая те, которые делали другие пользователи.

9. Для скачивания изменений с удалённого репозитория используеться команда `git pull`, которая не только подгрузит все изменения, но и постараеться слить все изменения (merge). 

10. Изменение имени главной ветки выполняется следующей командой:

```
git branch --move master main
```
__Изменение имени ветки, например master/main/mainline/default, сломает интеграции, службы, вспомогательные утилиты и скрипты сборки, которые использует ваш репозиторий. Прежде чем сделать это, обязательно проконсультируйтесь с коллегами. Также убедитесь, что вы выполнили тщательный поиск в своём репозитории и обновили все ссылки на старое имя ветки в вашем коде или скриптах.__

11. Чтобы все остальные могли видеть новую ветку main, вам нужно отправить её в общий репозиторий. Это делает переименованную ветку доступной в удалённом репозитории.
```
$ git push --set-upstream origin main
```
В итоге, состояние репозитория становится следующим:
```
$ git branch --all
```
* main
*  remotes/origin/HEAD -> origin/master
 * remotes/origin/main
  *remotes/origin/master


Локальная ветка master исчезла, так как она заменена веткой main. Ветка main доступна в удалённом репозитории. Старая ветка master всё ещё присутствует в удалённом репозитории. Остальные участники будут продолжать использовать ветку master в качестве основы для своей работы, пока вы не совершите ряд дополнительных действий.

12. Для внесения изменений в сторонний репозиторий на `Githab` используется функция `Pull request`. Данная функция позволяет участвовать в чужом проекте и предлагать изменения автору этого проекта не внося изменения в весь проект, пока автор их не примет сам. Для этого необходимо на `Githab` найти интересующий нас проект и скоприровать его на свой аккаунт кнопокой `Fork` (`вилка`).

13. Далее уже на своём аккаунте копируем ссылку на удалённый репозиторий и с помощью команды `git clone` можем перенести его на локальный компьютер.

14. Далее в терминале при помощи команды `cd` переключаемся на локальную папку с клонированым репозиторием.
__Команда `cd` набираем без команды `git`.__

15. 
